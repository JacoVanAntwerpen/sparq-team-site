---
const { person } = Astro.props as { person: any };
const d = person?.data ?? {};
const displayName = [d.prefix, d.name].filter(Boolean).join(' ').trim();
const role = d.role ?? d.title ?? '';
const email = d.email ?? '';
const photo = d.photo || '/uploads/avatar-placeholder.png';
const profileUrl = `/team/${person.slug}`;
---
<div class="rounded-2xl border border-neutral-200 bg-white p-6 shadow-sm transition hover:shadow-md">
  <a href={profileUrl} class="block">
    <div class="flex flex-col items-center text-center">
      <img
        src={photo}
        alt={displayName}
        class="h-36 w-36 rounded-full object-cover ring-1 ring-neutral-200"
        loading="lazy"
      />
      <h3 class="mt-4 text-lg font-semibold">{displayName}</h3>
      {role && <p class="mt-1 text-sm text-neutral-600">{role}</p>}
      {email && <p class="mt-3 text-sm text-neutral-700"><span class="text-neutral-500">Email:</span> {email}</p>}
    </div>
  </a>

  {d.linkedin && (
    <div class="mt-4 flex justify-center">
      <a
        href={d.linkedin}
        target="_blank"
        rel="noopener noreferrer"
        class="inline-flex items-center rounded-full border border-neutral-300 px-3 py-1 text-sm font-medium hover:bg-neutral-50"
        aria-label={`Open ${displayName}'s LinkedIn profile in a new tab`}
      >
        LinkedIn
        <span class="sr-only"> (opens in a new tab)</span>
      </a>
    </div>
  )}
</div>
